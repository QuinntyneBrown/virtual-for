angular.module("virtualIndexedListView",[]);var VirtualIndexedListView;!function(e){var t=function(){function e(e,t){var i=this;this.getHtml=e,this.virtualIndexedListViewRenderer=t,this.restirct="A",this.transclude="element",this.scope=!1,this.compile=function(e){function t(e){e[0].removeAttribute("virtual-indexed-list-view"),e[0].removeAttribute("virtual-indexed-list-view-collection-name"),e[0].removeAttribute("virtual-indexed-list-view-item-name"),e[0].removeAttribute("virtual-indexed-list-view-item-height"),e[0].removeAttribute("virtual-indexed-list-view-items"),e[0].removeAttribute("virtual-indexed-list-view-name"),e[0].removeAttribute("virtual-indexed-list-view-data-service"),e[0].removeAttribute("virtual-indexed-list-view-search-term-name-on-scope"),e[0].removeAttribute("virtual-indexed-list-view-filter-fn-name-on-vm")}var n=i.virtualIndexedListViewRenderer,r=e.parent(),a=i.getHtml;return function(e,i,o,s,l){l(e.$new(),function(i){t(i),n.createInstance({element:angular.element(r),template:a(i[0],!0),scope:e,attributes:o,items:o.virtualIndexedListViewItems?JSON.parse(o.virtualIndexedListViewItems):e.vm[o.virtualIndexedListViewCollectionName],dataService:o.virtualIndexedListViewDataService,searchTermNameOnScope:o.virtualIndexedListViewSearchTermNameOnScope,filterFnNameOnVm:o.virtualIndexedListViewFilterFnNameOnVm}).render({lastScrollY:0,scrollY:0})})}}}return e.createInstance=function(t,i){return new e(t,i)},e}();e.VirtualIndexedListView=t,angular.module("virtualIndexedListView").directive("virtualIndexedListView",["virtualIndexedListView.getHtml","virtualIndexedListViewRenderer",t.createInstance])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){"use strict";var t=function(e,t){if(!e||!e.tagName)return"";var i,n,r=document.createElement("div");return r.appendChild(e.cloneNode(!1)),i=r.innerHTML,t&&(n=i.indexOf(">")+1,i=i.substring(0,n)+e.innerHTML+i.substring(n)),r=null,i};angular.module("virtualIndexedListView").value("virtualIndexedListView.getHtml",t)}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){e.getX=function(e){var t=angular.element(e).css("transform");return"none"===t?0:JSON.parse(t.replace(/^\w+\(/,"[").replace(/\)$/,"]"))[6]},angular.module("virtualIndexedListView").value("virtualIndexedListView.getX",e.getX)}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){e.getY=function(e){var t=angular.element(e).css("transform");return"none"===t?0:JSON.parse(t.replace(/^\w+\(/,"[").replace(/\)$/,"]"))[5]},angular.module("virtualIndexedListView").value("virtualIndexedListView.getY",e.getY)}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){"use strict";var t=function(){function e(e){var t=this;this.$injector=e,this.get=function(e){switch(e["interface"]){case"ICollectionManager":return e.filterFnNameOnVm&&e.searchTermNameOnScope?t.$injector.get("virtualIndexedListView.filterableCollectionManager").createInstance({items:e.items,scope:e.scope,searchTermNameOnScope:e.searchTermNameOnScope,filterFnNameOnVm:e.filterFnNameOnVm}):e.dataService?t.$injector.get("virtualIndexedListView.lazyLoadCollectionManager").createInstance({items:e.items,dataService:e.dataService}):t.$injector.get("virtualIndexedListView.collectionManager").createInstance({items:e.items});case"IViewPort":return t.$injector.get("virtualIndexedListView.viewPort").createInstance({element:e.element});case"IContainer":return t.$injector.get("virtualIndexedListView.container").createInstance({element:e.element});case"IRenderedNodes":return t.$injector.get("virtualIndexedListView.renderedNodes").createInstance({container:e.container});case"IVirtualNodes":return t.$injector.get("virtualIndexedListView.virtualNodes").createInstance({items:e.items,numberOfRenderedItems:e.numberOfRenderedItems,itemHeight:e.itemHeight})}}}return e}();angular.module("virtualIndexedListView").service("virtualIndexedListView.injector",["$injector",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){e.safeDigest=function(e){e.$$phase||e.$root.$$phase||e.$digest()},angular.module("virtualIndexedListView").value("virtualIndexedListView.safeDigest",e.safeDigest)}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){e.transformY=function(e,t){return angular.element(e).css({"-moz-transform":"translateY("+t+"px)","-webkit-transform":"translateY("+t+"px)","-ms-transform":"translateY("+t+"px)","-transform":"translateY("+t+"px)"}),e},angular.module("virtualIndexedListView").value("virtualIndexedListView.transformY",e.transformY)}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){var t=function(){function e(t){var i=this;this.$q=t,this.createInstance=function(t){var n=new e(i.$q);return n.items=t.items,n.numberOfItems=t.items.length,n},this.getIndexByCriteriaAsync=function(e){for(var t=i.$q.defer(),n=null,r=0;r<i.items.length;r++)i.items[r][e.criteria.key]==e.criteria.value&&(n=r);return t.resolve({index:n}),t.promise},this.subscriptions=[],this.subscribe=function(e){return i.subscriptions.push({callback:e.callback,id:i.subscriptions.length+1,isActive:!0}),i.subscriptions.length}}return Object.defineProperty(e.prototype,"numberOfItems",{get:function(){return this._numberOfItems},set:function(e){this._numberOfItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),e}();e.CollectionManager=t,angular.module("virtualIndexedListView").service("virtualIndexedListView.collectionManager",["$q",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){var t=function(){function e(t){var i=this;this.getY=t,this.createInstance=function(t){var n=new e(i.getY),r=angular.element("<div class='container'></div>");return t.element.append(r),n.augmentedJQuery=t.element.find(".container"),n},this.reInitialize=function(e){for(var t=0;t<i.htmlElement.children.length;t++){var n=angular.element(i.htmlElement.children[t]).scope();n.$destroy()}i.htmlElement.innerHTML="",i.setHeight(e.height)},this.isNodeAtBottom=function(e){var t=i.getY(e.node)+e.node.offsetTop+e.node.offsetTop;return t===i.height},this.isNodeAtTop=function(e){var t=i.getY(e.node)+e.node.offsetTop;return t===i.top},this.setHeight=function(e){i.augmentedJQuery.css("height",e)}}return Object.defineProperty(e.prototype,"height",{get:function(){return this.htmlElement.offsetHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.htmlElement.offsetHeight+this.htmlElement.offsetTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.htmlElement.offsetTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"augmentedJQuery",{get:function(){return this._augmentedJQuery},set:function(e){this._augmentedJQuery=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this.augmentedJQuery[0]},enumerable:!0,configurable:!0}),e}();angular.module("virtualIndexedListView").service("virtualIndexedListView.container",["virtualIndexedListView.getY",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){var t=function(){function e(t,i){var n=this;this.$q=t,this.$timeout=i,this.createInstance=function(t){var i=new e(n.$q,n.$timeout);return i.items=t.items,i.numberOfItems=t.items.length,i.filterFn=t.scope.vm[t.filterFnNameOnVm],t.scope.$watch(t.searchTermNameOnScope,function(e){i.searchTerm=e;for(var t=0;t<i.subscriptions.length;t++)i.subscriptions[t].callback()}),i},this.getIndexByCriteriaAsync=function(e){for(var t=n.$q.defer(),i=null,r=0;r<n.items.length;r++)n.items[r][e.criteria.key]==e.criteria.value&&(i=r);return t.resolve({index:i}),t.promise},this.subscriptions=[],this.subscribe=function(e){return n.subscriptions.push({callback:e.callback,id:n.subscriptions.length+1,isActive:!0}),n.subscriptions.length}}return Object.defineProperty(e.prototype,"numberOfItems",{get:function(){return this._numberOfItems},set:function(e){this._numberOfItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this.searchTerm&&""!=this.searchTerm?this._items.filter(function(t){return e.filterFn(t,e.searchTerm)}):this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),e}();e.FilterableCollectionManager=t,angular.module("virtualIndexedListView").service("virtualIndexedListView.filterableCollectionManager",["$q","$timeout",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){var t=function(){function e(t,i){var n=this;this.$injector=t,this.$q=i,this.createInstance=function(t){var i=new e(n.$injector,n.$q);return i.items=t.items,i.numberOfItems=t.items.length,i.dataService=i.$injector.get(t.dataService),i.dataService.search({}).then(function(e){i.numberOfItems=e.data.TotalHits;for(var t=0;t<e.data.TotalHits;t++)i.items.push(null);for(var t=0;t<e.data.Data.length;t++)i.items[t]=e.data.Data[t].Item;for(var t=0;t<i.subscriptions.length;t++)i.subscriptions[t].callback()}),i},this.getIndexByCriteriaAsync=function(e){for(var t=n.$q.defer(),i=null,r=0;r<n.items.length;r++)n.items[r][e.criteria.key]==e.criteria.value&&(i=r);return t.resolve({index:i}),t.promise},this.loadMore=function(){var e=n.lastLoadedIndex;n.loaded||n.dataService.search({params:{offset:e,pageSize:n.pageSize}}).then(function(t){for(var i=0;i<t.data.Data.length;i++)n.items[i+e]=t.data.Data[i].Item})},this.subscriptions=[],this.subscribe=function(e){return n.subscriptions.push({callback:e.callback,id:n.subscriptions.length+1,isActive:!0}),n.subscriptions.length}}return Object.defineProperty(e.prototype,"loaded",{get:function(){for(var e=!0,t=0;t<this.items.length;t++)null===this.items[t]&&(e=!1,t=this.items.length);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastLoadedIndex",{get:function(){for(var e=null,t=0;t<this.items.length;t++)null===this.items[t]&&null===e&&(e=t,t=this.items.length);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSize",{get:function(){return 128},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfItems",{get:function(){return this._numberOfItems},set:function(e){this._numberOfItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),e}();e.LazyLoadCollectionManager=t,angular.module("virtualIndexedListView").service("virtualIndexedListView.lazyLoadCollectionManager",["$injector","$q",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){var t=function(){function e(t,i){var n=this;this.getX=t,this.getY=i,this.createInstance=function(t){var i=new e(n.getX,n.getY);return i.node=t.node,i}}return Object.defineProperty(e.prototype,"left",{get:function(){return this.getX(this.node)+this.node.offsetLeft},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.getX(this.node)+this.node.offsetLeft+this.node.offsetWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.getY(this.node)+this.node.offsetTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.getY(this.node)+this.node.offsetHeight+this.node.offsetTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return angular.element(this.node).scope()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$$index",{get:function(){return this.scope.$$index},enumerable:!0,configurable:!0}),e}();angular.module("virtualIndexedListView").service("virtualIndexedListView.renderedNode",["virtualIndexedListView.getX","virtualIndexedListView.getY",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){var t=function(){function e(t,i){var n=this;this.getX=t,this.getY=i,this.createInstance=function(t){var i=new e(n.getX,n.getY);return i.container=t.container,i},this.getAll=function(e){var t;switch(e.orientation){case"horizontal":t="left";break;default:t="top"}switch(e.order){case"desc":return n.map.sort(function(e,i){return i[t]-e[t]});case"asc":return n.map.sort(function(e,i){return e[t]-i[t]})}},this.getHead=function(){var e=n.getAll({order:"asc"});return e.length<1?null:e[0]},this.getTail=function(){var e=n.getAll({order:"desc"});return e.length<1?null:e[0]},this.getHeadAndTail=function(){var e=n.getAll({order:"asc"});return e.length<1?null:{head:e[0],tail:e[e.length-1]}}}return Object.defineProperty(e.prototype,"nodes",{get:function(){return this.container.htmlElement.childNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){for(var e=[],t=this.nodes,i=0;i<t.length;i++){var n=t[i];e.push({top:this.getY(n)+n.offsetTop,bottom:this.getY(n)+n.offsetTop+n.offsetHeight,node:n})}return e},enumerable:!0,configurable:!0}),e}();angular.module("virtualIndexedListView").service("virtualIndexedListView.renderedNodes",["virtualIndexedListView.getX","virtualIndexedListView.getY",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){var t=function(){function e(t){var i=this;this.$q=t,this.createInstance=function(t){var n=new e(i.$q);return n.items=t.items,n.numberOfItems=t.items.length,n},this.getIndexByCriteriaAsync=function(e){for(var t=i.$q.defer(),n=null,r=0;r<i.items.length;r++)i.items[r][e.criteria.key]==e.criteria.value&&(n=r);return t.resolve({index:n}),t.promise},this.subscriptions=[],this.subscribe=function(e){return i.subscriptions.push({callback:e.callback,id:i.subscriptions.length+1,isActive:!0}),i.subscriptions.length}}return Object.defineProperty(e.prototype,"numberOfItems",{get:function(){return this._numberOfItems},set:function(e){this._numberOfItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),e}();e.ScopeCollectionManager=t,angular.module("virtualIndexedListView").service("scopeCollectionManager",["$q",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){var t=function(){function e(t){var i=this;this.$window=t,this.createInstance=function(t){var n=new e(i.$window);return n.scrollableParentElement=n.getScrollableParent(t.element[0]),n},this.getScrollableParent=function(e){if("HTML"==e.tagName)return null;var t=angular.element(e).css("overflowY");return"scroll"==t||"auto"==t?angular.element(e):e.parentNode?i.getScrollableParent(e.parentNode):void 0},this.scrollTo=function(e){i.scrollableParentElement?i.scrollableParentElement[0].scrollTop=e:i.$window.scrollTo(0,e)}}return Object.defineProperty(e.prototype,"scrollY",{get:function(){return this.scrollableParentElement?this.scrollableParentElement[0].scrollTop:this.$window.pageYOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scrollableParentElement?this.scrollableParentElement[0].offsetHeight:this.$window.innerHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.scrollY+this.height},enumerable:!0,configurable:!0}),e}();angular.module("virtualIndexedListView").service("virtualIndexedListView.viewPort",["$window",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){"use strict";var t=function(){function t(i,n,r,a,o,s){var l=this;this.$compile=i,this.$interval=n,this.getY=r,this.injector=a,this.safeDigest=o,this.transformY=s,this.createInstance=function(i){var n=new t(l.$compile,l.$interval,l.getY,l.injector,l.safeDigest,l.transformY);return n.attributes=i.attributes,n.scope=i.scope,n.element=i.element,n.template=i.template,n.viewPort=l.injector.get({"interface":"IViewPort",element:n.element}),n.container=l.injector.get({"interface":"IContainer",element:n.element}),n.collectionManager=l.injector.get({"interface":"ICollectionManager",element:n.element,scope:i.scope,searchTermNameOnScope:i.searchTermNameOnScope,filterFnNameOnVm:i.filterFnNameOnVm,items:i.items,dataService:i.dataService,attributes:i.attributes}),n.renderedNodes=l.injector.get({"interface":"IRenderedNodes",container:n.container}),n.collectionManager instanceof e.LazyLoadCollectionManager&&n.$interval(n.collectionManager.loadMore,1e3,null,!1),n.scope.$on(n.scrollEventName,function(e,t){n.collectionManager.getIndexByCriteriaAsync({criteria:t}).then(function(e){n.viewPort.scrollTo(e.index*n.itemHeight)})}),n.collectionManager.subscribe({callback:n.forceRender}),n.container.setHeight(n.collectionManager.numberOfItems*n.itemHeight),n.$interval(function(){n.render({scrollY:n.viewPort.scrollY,lastScrollY:n.lastYScroll}),n.lastYScroll=n.viewPort.scrollY},1,null,!1),n.$interval(n.onResize,10,null,!1),n},this.render=function(e){return e.force?l.forceRender():l.hasRendered===!1?l.initialRender():e.scrollY>e.lastScrollY?l.renderTopToBottom(e):e.scrollY<e.lastScrollY?l.renderBottomToTop(e):void 0},this.forceRender=function(){l.hasRendered&&(l.container.reInitialize({height:l.collectionManager.numberOfItems*l.itemHeight}),l.initialRender(),l.safeDigest(l.scope))},this.initialRender=function(){for(var e=document.createDocumentFragment(),t=0;t<l.numberOfRenderedItems;t++){var i=l.scope.$new(!0);i[l.itemName]=l.collectionManager.items[t],i.$$index=t;var n=l.$compile(angular.element(l.template))(i);e.appendChild(n[0])}l.container.augmentedJQuery[0].appendChild(e),l.hasRendered=!0},this.renderTopToBottom=function(e){var t=!1,i=!1,n=!1;do{var r=l.renderedNodes.getHeadAndTail(),a=r.tail,o=r.head;if(a.bottom>=l.container.bottom&&(t=!0),o.bottom>=e.scrollY&&(i=!0),!t&&!i){var s=l.getY(o.node),u=l.getY(a.node),c=l.container.top+s+o.node.offsetTop,d=l.container.top+u+a.node.offsetTop+l.itemHeight,m=d-c+s,f=angular.element(a.node).scope().$$index;l.moveAndUpdateScope({node:o.node,position:m,index:f+1,item:l.collectionManager.items[f+1]}),n=!0}}while(!t&&!i);n&&l.safeDigest(l.scope)},this.moveAndUpdateScope=function(e){l.transformY(e.node,e.position);var t=angular.element(e.node).scope();t[l.itemName]=e.item,t.$$index=e.index},this.renderBottomToTop=function(e){var t=!1,i=!1,n=!1;do{var r=l.renderedNodes.getHeadAndTail(),a=r.tail,o=r.head;if(a.bottom<=l.container.htmlElement.offsetTop+l.itemHeight*l.numberOfRenderedItems&&(t=!0),a.top<=l.viewPort.scrollY+l.viewPort.height&&(i=!0),!t&&!i){var s=l.getY(o.node),u=l.getY(a.node),c=l.container.top+u+a.node.offsetTop,d=l.container.top+s+o.node.offsetTop-l.itemHeight,m=d-c+u,f=angular.element(o.node).scope().$$index;l.moveAndUpdateScope({node:a.node,position:m,index:f-1,item:l.collectionManager.items[f-1]}),n=!0}}while(!t&&!i);n&&l.safeDigest(l.scope)},this.onResize=function(){if(l.maxViewPortHeight||(l.maxViewPortHeight=l.viewPort.height),l.maxViewPortHeight&&l.maxViewPortHeight<l.viewPort.height){l.maxViewPortHeight=l.viewPort.height;for(var e=l.renderedNodes.getAll({order:"asc"}).length;l.numberOfRenderedItems>e;){var t=l.renderedNodes.getHeadAndTail().tail,i=angular.element(t.node).scope().$$index+1,n=l.scope.$new(!0);n[l.itemName]=l.collectionManager.items[i],n.$$index=i;var r=l.$compile(angular.element(l.template))(n);l.container.augmentedJQuery.append(r);var a=r[0],o=l.getY(a),s=l.getY(t.node),u=l.container.top+o+a.offsetTop,c=l.container.top+s+t.node.offsetTop+l.itemHeight,d=c-u+o;l.transformY(a,d),e++}l.safeDigest(l.scope)}},this.hasRendered=!1,this.calculateItemHeight=function(e){var t;if(e.items.length>0){var i=l.scope.$new(!0);i[l.itemName]=e.items[0];var n=l.$compile(angular.element(l.template))(i);l.container.augmentedJQuery.append(n),t=n[0].offsetHeight,l.container.htmlElement.removeChild(n[0])}return t},this.lastYScroll=0}return Object.defineProperty(t.prototype,"numberOfRenderedItems",{get:function(){var e=Math.ceil((this.viewPort.height+this.container.htmlElement.offsetTop)/Number(this.itemHeight));return this.collectionManager.numberOfItems<e?this.collectionManager.numberOfItems:e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemName",{get:function(){return this.attributes[this.controlPrefix+"ItemName"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemHeight",{get:function(){return!this._itemHeight&&this.collectionManager.items.length>0&&(this._itemHeight=this.calculateItemHeight({items:this.collectionManager.items})),this._itemHeight?this._itemHeight:Number(this.attributes[this.controlPrefix+"ItemHeight"])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.attributes[this.controlPrefix+"Name"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollEventName",{get:function(){return this.controlPrefix+"Scroll"+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controlPrefix",{get:function(){return"virtualIndexedListView"},enumerable:!0,configurable:!0}),t}();angular.module("virtualIndexedListView").service("virtualIndexedListViewRenderer",["$compile","$interval","virtualIndexedListView.getY","virtualIndexedListView.injector","virtualIndexedListView.safeDigest","virtualIndexedListView.transformY",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){var t=function(){function e(){var t=this;this.createInstance=function(t){var i=new e;return i.numberOfRenderedItems=t.numberOfRenderedItems,i.items=t.items,i.numberOfItems=t.numberOfItems,i.itemHeight=t.itemHeight,i},this.getYByRenderedIndexAndScrollY=function(e){for(var i=null,n=0;n<t.map.length;n++){var r=t.map[n];r.renderedNodeIndex==e.renderedNodeIndex&&e.scrollY<=r.maxScrollYThreshold&&null==i&&(i=r.y)}return i},this.getPageIndex=function(e){return Math.floor(e.index/t.numberOfRenderedItems)}}return Object.defineProperty(e.prototype,"map",{get:function(){for(var e=[],t=0,i=0;i<this.items.length;i++){var n=this.getPageIndex({index:i});this.itemHeight+n*this.itemHeight;e.push({index:i,y:n*(this.numberOfRenderedItems*this.itemHeight),renderedNodeIndex:t,pageIndex:n,maxScrollYThreshold:(n+1)*this.itemHeight+this.itemHeight*t}),t++,t==this.numberOfRenderedItems&&(t=0)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pages",{get:function(){return Math.ceil(this.numberOfItems/this.numberOfRenderedItems)},enumerable:!0,configurable:!0}),e}();angular.module("virtualIndexedListView").service("virtualIndexedListView.virtualNodes",[t])}(VirtualIndexedListView||(VirtualIndexedListView={}));