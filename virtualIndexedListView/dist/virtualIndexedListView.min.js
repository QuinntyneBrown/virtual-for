angular.module("virtualIndexedListView",["rx"]);var VirtualIndexedListView;!function(e){var t=function(){function e(e,t){var i=this;this.getHtml=e,this.virtualIndexedListViewManager=t,this.restirct="A",this.transclude="element",this.scope=!1,this.compile=function(e){function t(e){e[0].removeAttribute("virtual-indexed-list-view"),e[0].removeAttribute("virtual-indexed-list-view-collection-name"),e[0].removeAttribute("virtual-indexed-list-view-item-name"),e[0].removeAttribute("virtual-indexed-list-view-item-height"),e[0].removeAttribute("virtual-indexed-list-view-items")}var n=i.virtualIndexedListViewManager,r=e.parent(),a=i.getHtml;return function(e,i,d,l,s){s(e.$new(),function(i){t(i),n.createInstance({element:angular.element(r),template:a(i[0],!0),scope:e,items:d.virtualIndexedListViewItems?JSON.parse(d.virtualIndexedListViewItems):e[d.virtualIndexedListViewCollectionName],itemName:d.virtualIndexedListViewItemName,itemHeight:d.virtualIndexedListViewItemHeight}).render()})}}}return e.createInstance=function(t,i){return new e(t,i)},e}();e.VirtualIndexedListView=t,angular.module("virtualIndexedListView").directive("virtualIndexedListView",["getHtml","virtualIndexedListViewManager",t.createInstance])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){var t=function(){function e(t,i,n,r){var a=this;this.$injector=t,this.$interval=i,this.$timeout=n,this.$window=r,this.createInstance=function(t){var i=new e(a.$injector,a.$interval,a.$timeout,a.$window);i.element=t.element,i.scope=t.scope,i.template=t.template;var n=a.$injector.get("virtualIndexedListViewRenderer");return i.virtualIndexedListViewRenderer=n.createInstance({containerHeight:t.items.length*t.itemHeight,items:t.items,itemName:t.itemName,itemHeight:t.itemHeight,element:t.element,scope:t.scope,template:t.template}),i.elementCSS=i.$window.getComputedStyle(i.element[0],null),i.elementCSS&&i.elementCSS.overflowY&&("auto"==i.elementCSS.overflowY||"scroll"==i.elementCSS.overflowY)&&i.element[0].addEventListener("scroll",i.debouceRender),a.$window.addEventListener("mousewheel",i.debouceRender),a.$window.addEventListener("scroll",i.onScroll),a.$window.addEventListener("resize",i.debouceRender),i},this.render=function(e){a.virtualIndexedListViewRenderer.render({})},this.debouceRender=function(){a.$timeout.cancel(a.timer),a.timer=a.$timeout(function(){a.render({})},250,!1)},this.onScroll=function(e){return a.lastScrollY==window.pageYOffset?void setTimeout(a.debouceRender,100):void(a.lastScrollY=window.pageYOffset)},this.lastScrollY=window.pageYOffset,this.scrollY=window.pageYOffset}return e}();angular.module("virtualIndexedListView").service("virtualIndexedListViewManager",["$injector","$interval","$timeout","$window",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){"use strict";var t=function(){function e(t,i){var n=this;this.$compile=t,this.$window=i,this.createInstance=function(t){var i=new e(n.$compile,n.$window);return i.containerHeight=t.containerHeight,i.items=t.items,i.itemName=t.itemName,i.scope=t.scope,i.element=t.element,i.template=t.template,i.itemHeight=t.itemHeight,i},this.render=function(e){n.innerHeight=n.$window.innerHeight;var t=Math.ceil(n.innerHeight/n.itemHeight);if(n.hasRendered===!1){var i=(n.element[0].parentNode,angular.element("<div class='container'></div>"));i.css("height",n.containerHeight),n.element.append(i);for(var r=(i[0].getBoundingClientRect(),0);t>r;r++){var a=n.scope.$new(!0);a[n.itemName]=n.items[r];var d=n.$compile(angular.element(n.template))(a);i.append(d)}}n.hasRendered=!0},this.hasRendered=!1}return e}();angular.module("virtualIndexedListView").service("virtualIndexedListViewRenderer",["$compile","$window",t])}(VirtualIndexedListView||(VirtualIndexedListView={}));var VirtualIndexedListView;!function(e){"use strict";var t=function(e,t){if(!e||!e.tagName)return"";var i,n,r=document.createElement("div");return r.appendChild(e.cloneNode(!1)),i=r.innerHTML,t&&(n=i.indexOf(">")+1,i=i.substring(0,n)+e.innerHTML+i.substring(n)),r=null,i};angular.module("virtualIndexedListView").value("getHtml",t)}(VirtualIndexedListView||(VirtualIndexedListView={}));