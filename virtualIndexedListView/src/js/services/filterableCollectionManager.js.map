{"version":3,"sources":["services/filterableCollectionManager.ts"],"names":["VirtualIndexedListView","VirtualIndexedListView.FilterableCollectionManager","VirtualIndexedListView.FilterableCollectionManager.constructor","VirtualIndexedListView.FilterableCollectionManager.numberOfItems","VirtualIndexedListView.FilterableCollectionManager.items"],"mappings":"AAAA,yDAAyD;AAEzD,IAAO,sBAAsB,CAgF5B;AAhFD,WAAO,sBAAsB,EAAC,CAAC;IAE3BA;QACIC,qCAAoBA,EAAeA,EAAUA,QAA2BA,EAASA,cAAmBA;YADxGC,iBA2ECA;YA1EuBA,OAAEA,GAAFA,EAAEA,CAAaA;YAAUA,aAAQA,GAARA,QAAQA,CAAmBA;YAASA,mBAAcA,GAAdA,cAAcA,CAAKA;YAE7FA,mBAAcA,GAAGA,UAACA,OAAoDA;gBACzEA,IAAIA,QAAQA,GAAGA,IAAIA,2BAA2BA,CAACA,KAAIA,CAACA,EAAEA,EAACA,KAAIA,CAACA,QAAQA,EAAEA,KAAIA,CAACA,cAAcA,CAACA,CAACA;gBAC3FA,QAAQA,CAACA,KAAKA,GAAGA,OAAOA,CAACA,KAAKA,CAACA;gBAC/BA,QAAQA,CAACA,aAAaA,GAAGA,OAAOA,CAACA,KAAKA,CAACA,MAAMA,CAACA;gBAE9CA,IAAIA,cAAcA,GAAGA,IAAIA,CAACA;gBAE1BA,QAAQA,CAACA,cAAcA,CAACA,OAAOA,CAACA,KAAKA,EAAEA,OAAOA,CAACA,qBAAqBA,CAACA;qBAChEA,GAAGA,CAACA,UAAUA,IAAIA;oBACf,MAAM,CAAC,IAAI,CAAC;gBAChB,CAAC,CAACA;qBACDA,SAASA,CAACA,UAAUA,MAAMA;oBAE3B,EAAE,CAAC,CAAC,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC;wBACrC,OAAO,CAAC,QAAQ,GAAG,UAAC,KAAU;4BAC1B,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;wBACpD,CAAC,CAAA;wBAED,EAAE,CAAC,CAAC,cAAc,CAAC;4BACf,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;wBAE7C,cAAc,GAAG,QAAQ,CAAC,QAAQ,CAAC;4BAC/B,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;gCACrD,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC;4BACzC,CAAC;wBACL,CAAC,EAAE,EAAE,EAAE,KAAK,CAAC,CAAC;oBAClB,CAAC;gBACL,CAAC,CAACA,CAACA;gBACHA,MAAMA,CAACA,QAAQA,CAACA;YACpBA,CAACA,CAAAA;YAEMA,4BAAuBA,GAAGA,UAACA,OAAYA;gBAE1CA,IAAIA,QAAQA,GAAGA,KAAIA,CAACA,EAAEA,CAACA,KAAKA,EAAEA,CAACA;gBAE/BA,QAAQA,CAACA,OAAOA,CAACA,IAAIA,CAACA,CAACA;gBAEvBA,MAAMA,CAACA,QAAQA,CAACA,OAAOA,CAACA;YAC5BA,CAACA,CAAAA;YAwBMA,kBAAaA,GAAoBA,EAAEA,CAACA;YAEpCA,cAASA,GAAGA,UAACA,OAA0BA;gBAC1CA,KAAIA,CAACA,aAAaA,CAACA,IAAIA,CAACA;oBACpBA,QAAQA,EAAEA,OAAOA,CAACA,QAAQA;oBAC1BA,EAAEA,EAAEA,KAAIA,CAACA,aAAaA,CAACA,MAAMA,GAAGA,CAACA;oBACjCA,QAAQA,EAAEA,IAAIA;iBACjBA,CAACA,CAACA;gBACHA,MAAMA,CAACA,KAAIA,CAACA,aAAaA,CAACA,MAAMA,CAACA;YACrCA,CAACA,CAAAA;QAzEuGA,CAACA;QA8CzGD,sBAAWA,sDAAaA;iBAAxBA;gBACIE,MAAMA,CAACA,IAAIA,CAACA,cAAcA,CAACA;YAC/BA,CAACA;iBAEDF,UAAyBA,KAAaA;gBAClCE,IAAIA,CAACA,cAAcA,GAAGA,KAAKA,CAACA;YAChCA,CAACA;;;WAJAF;QAQDA,sBAAWA,8CAAKA;iBAAhBA;gBACIG,MAAMA,CAACA,IAAIA,CAACA,MAAMA,CAACA;YACvBA,CAACA;iBAEDH,UAAiBA,KAAYA;gBACzBG,IAAIA,CAACA,MAAMA,GAAGA,KAAKA,CAACA;YACxBA,CAACA;;;WAJAH;QAgBLA,kCAACA;IAADA,CA3EAD,AA2ECC,IAAAD;IAEDA,OAAOA,CAACA,MAAMA,CAACA,wBAAwBA,CAACA,CAACA,OAAOA,CAACA,oDAAoDA,EAAEA,CAACA,IAAIA,EAAEA,UAAUA,EAACA,gBAAgBA,EAACA,2BAA2BA,CAACA,CAACA,CAACA;AAC5KA,CAACA,EAhFM,sBAAsB,KAAtB,sBAAsB,QAgF5B","file":"services/filterableCollectionManager.js","sourcesContent":["/// <reference path=\"../../typings/typescriptapp.d.ts\" />\r\n\r\nmodule VirtualIndexedListView {\r\n\r\n    class FilterableCollectionManager implements IFilterableCollectionManager {\r\n        constructor(private $q:ng.IQService, private $timeout:ng.ITimeoutService,private observeOnScope: any) { }\r\n\r\n        public createInstance = (options: IFilterableCollectionManagerInstanceOptions) => {\r\n            var instance = new FilterableCollectionManager(this.$q,this.$timeout, this.observeOnScope);\r\n            instance.items = options.items;\r\n            instance.numberOfItems = options.items.length;\r\n\r\n            var timeoutPromise = null;\r\n\r\n            instance.observeOnScope(options.scope, options.searchTermNameOnScope)\r\n                .map(function (data) {\r\n                    return data;\r\n                })\r\n                .subscribe(function (change) {\r\n\r\n                if (change.oldValue != change.newValue) {\r\n                    options.filterFn = (value: any) => {\r\n                        return value.name.indexOf(change.newValue) > -1;\r\n                    }\r\n\r\n                    if (timeoutPromise)\r\n                        instance.$timeout.cancel(timeoutPromise);\r\n\r\n                    timeoutPromise = instance.$timeout(() => {\r\n                        for (var i = 0; i < instance.subscriptions.length; i++) {\r\n                            instance.subscriptions[i].callback();\r\n                        }\r\n                    }, 10, false);\r\n                }\r\n            });\r\n            return instance;\r\n        }\r\n\r\n        public getIndexByCriteriaAsync = (options: any) => {\r\n\r\n            var deferred = this.$q.defer();\r\n\r\n            deferred.resolve(true);\r\n\r\n            return deferred.promise;\r\n        } \r\n\r\n        public scope: any;\r\n\r\n        private _numberOfItems: number;\r\n\r\n        public get numberOfItems() {\r\n            return this._numberOfItems;\r\n        }\r\n\r\n        public set numberOfItems(value: number) {\r\n            this._numberOfItems = value;\r\n        }\r\n\r\n        private _items: any[];\r\n\r\n        public get items() {\r\n            return this._items;\r\n        }\r\n\r\n        public set items(value: any[]) {\r\n            this._items = value;\r\n        }\r\n\r\n        public subscriptions: ISubscription[] = [];\r\n\r\n        public subscribe = (options: ISubscribeOptions) => {\r\n            this.subscriptions.push({\r\n                callback: options.callback,\r\n                id: this.subscriptions.length + 1,\r\n                isActive: true\r\n            });\r\n            return this.subscriptions.length;\r\n        }\r\n    }\r\n\r\n    angular.module(\"virtualIndexedListView\").service(\"virtualIndexedListView.filterableCollectionManager\", [\"$q\", \"$timeout\",\"observeOnScope\",FilterableCollectionManager]);\r\n} "],"sourceRoot":"/source/"}