{"version":3,"sources":["services/virtualIndexedListViewManager.ts"],"names":["VirtualIndexedListView","VirtualIndexedListView.VirtualIndexedListViewManager","VirtualIndexedListView.VirtualIndexedListViewManager.constructor"],"mappings":"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","file":"services/virtualIndexedListViewManager.js","sourcesContent":["/// <reference path=\"../../typings/typescriptapp.d.ts\" />\r\n\r\nmodule VirtualIndexedListView {\r\n\r\n    class VirtualIndexedListViewManager implements IVirtualIndexedListViewManager {\r\n\r\n        constructor(private $injector: ng.auto.IInjectorService,\r\n            private $interval: ng.IIntervalService,\r\n            private $timeout: ng.ITimeoutService,\r\n            private $window: ng.IWindowService) { }\r\n\r\n        public createInstance = (options: any) => {\r\n            var instance = new VirtualIndexedListViewManager(this.$injector, this.$interval, this.$timeout, this.$window);\r\n            instance.element = options.element;\r\n            instance.scope = options.scope;\r\n            instance.template = options.template;\r\n\r\n            var virtualIndexedListViewRenderer: IVirtualIndexedListViewRenderer = (<IVirtualIndexedListViewRenderer>this.$injector.get(\"virtualIndexedListViewRenderer\"));\r\n\r\n            instance.virtualIndexedListViewRenderer = virtualIndexedListViewRenderer.createInstance({\r\n                containerHeight: options.items.length * options.itemHeight,\r\n                items: options.items,\r\n                itemName: options.itemName,\r\n                itemHeight: options.itemHeight,\r\n                element: options.element,\r\n                scope: options.scope,\r\n                template: options.template\r\n            });\r\n\r\n            instance.elementCSS = instance.$window.getComputedStyle(instance.element[0], null);\r\n            if (instance.elementCSS && instance.elementCSS.overflowY && (instance.elementCSS.overflowY == \"auto\" || instance.elementCSS.overflowY == \"scroll\")) { instance.element[0].addEventListener(\"scroll\", instance.debouceRender); }\r\n            this.$window.addEventListener(\"mousewheel\", instance.debouceRender);\r\n            this.$window.addEventListener(\"scroll\", instance.onScroll);\r\n            this.$window.addEventListener(\"resize\", instance.debouceRender);\r\n\r\n            return instance;\r\n        }\r\n\r\n\r\n        public render = (options?: any) => {\r\n            this.virtualIndexedListViewRenderer.render({});\r\n        }\r\n\r\n        public elementCSS: CSSStyleDeclaration;\r\n\r\n        public element: ng.IAugmentedJQuery;\r\n\r\n        public scope: ng.IScope;\r\n\r\n        public template: string;\r\n\r\n        public itemName: string;\r\n\r\n        public itemHeight: number;\r\n\r\n        public items: any[];\r\n\r\n        public virtualIndexedListViewRenderer: IVirtualIndexedListViewRenderer;\r\n\r\n        public timer: any;\r\n\r\n        public debouceRender = () => {\r\n\r\n            this.$timeout.cancel(this.timer);\r\n\r\n            this.timer = this.$timeout(() => {\r\n                this.render({});\r\n            }, 250, false);\r\n\r\n        }\r\n\r\n        public onScroll = (e: Event) => {\r\n            if (this.lastScrollY == window.pageYOffset) {\r\n                setTimeout(this.debouceRender, 100);\r\n                return;\r\n            } else {\r\n                this.lastScrollY = window.pageYOffset;\r\n            }\r\n        }\r\n\r\n        public lastScrollY: number = window.pageYOffset; \r\n\r\n        public scrollY: number = window.pageYOffset;\r\n\r\n        public innerHeight: number;\r\n\r\n        public topViewPort: number;\r\n\r\n        public bottomViewPort: number;\r\n    }\r\n\r\n    angular.module(\"virtualIndexedListView\").service(\"virtualIndexedListViewManager\", [\"$injector\",\"$interval\",\"$timeout\",\"$window\",VirtualIndexedListViewManager]);\r\n}\r\n\r\n"],"sourceRoot":"/source/"}