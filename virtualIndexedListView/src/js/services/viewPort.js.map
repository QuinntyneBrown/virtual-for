{"version":3,"sources":["services/viewPort.ts"],"names":["VirtualIndexedListView","VirtualIndexedListView.ViewPort","VirtualIndexedListView.ViewPort.constructor","VirtualIndexedListView.ViewPort.scrollY","VirtualIndexedListView.ViewPort.height","VirtualIndexedListView.ViewPort.bottom"],"mappings":"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","file":"services/viewPort.js","sourcesContent":["/// <reference path=\"../../typings/typescriptapp.d.ts\" />\r\n\r\nmodule VirtualIndexedListView {\r\n\r\n    class ViewPort implements IViewPort {\r\n        constructor(private $window:ng.IWindowService) {\r\n            \r\n        }\r\n\r\n        public createInstance = (options: IViewPortInstanceOptions) => {\r\n            var instance = new ViewPort(this.$window);\r\n            instance.scrollableParentElement = instance.getScrollableParent(options.element[0]);           \r\n            return instance;\r\n        }\r\n\r\n        private scrollableParentElement: ng.IAugmentedJQuery;\r\n\r\n        private _scrollY: number;\r\n\r\n        public get scrollY() {\r\n\r\n            if (this.scrollableParentElement)\r\n                return (<HTMLElement>this.scrollableParentElement[0]).scrollTop;\r\n\r\n            return this.$window.pageYOffset;\r\n        }\r\n\r\n        private _height: number;\r\n\r\n        public get height() {\r\n            if (this.scrollableParentElement)\r\n                return (<HTMLElement>this.scrollableParentElement[0]).offsetHeight;\r\n\r\n            return this.$window.innerHeight;\r\n        }\r\n\r\n        public get bottom() {\r\n            return this.scrollY + this.height;\r\n        }\r\n\r\n        public getScrollableParent = (hTMLElement: HTMLElement) => {\r\n\r\n            if (hTMLElement.tagName == \"HTML\")\r\n                return null;\r\n\r\n            var scrollYCssValue = angular.element(hTMLElement).css(\"overflowY\");\r\n            if (scrollYCssValue == \"scroll\" || scrollYCssValue == \"auto\")\r\n                return angular.element(hTMLElement);\r\n\r\n            if (hTMLElement.parentNode)\r\n                return this.getScrollableParent(<HTMLElement>hTMLElement.parentNode);\r\n        }\r\n\r\n        public scrollTo = (value: number) => {\r\n\r\n            if (this.scrollableParentElement) {\r\n                this.scrollableParentElement[0].scrollTop = value;\r\n            } else {\r\n                this.$window.scrollTo(value);\r\n            }\r\n        }\r\n    }\r\n\r\n    angular.module(\"virtualIndexedListView\").service(\"virtualIndexedListView.viewPort\", [\"$window\",ViewPort]);\r\n}"],"sourceRoot":"/source/"}