{"version":3,"sources":["services/virtualIndexedListViewRenderer.ts"],"names":["VirtualIndexedListView","VirtualIndexedListView.VirtualIndexedListViewRenderer","VirtualIndexedListView.VirtualIndexedListViewRenderer.constructor","VirtualIndexedListView.VirtualIndexedListViewRenderer.filterTerm","VirtualIndexedListView.VirtualIndexedListViewRenderer.containerHeight","VirtualIndexedListView.VirtualIndexedListViewRenderer.items","VirtualIndexedListView.VirtualIndexedListViewRenderer.numberOfRenderedItems"],"mappings":"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","file":"services/virtualIndexedListViewRenderer.js","sourcesContent":["/// <reference path=\"../../typings/typescriptapp.d.ts\" />\r\n\r\nmodule VirtualIndexedListView {\r\n\r\n    \"use strict\";\r\n    \r\n    class VirtualIndexedListViewRenderer implements IVirtualIndexedListViewRenderer {\r\n        constructor(private $compile: ng.ICompileService,\r\n            private $injector: ng.auto.IInjectorService,\r\n            private $interval: ng.IIntervalService,\r\n            private $timeout: ng.ITimeoutService,\r\n            private getRenderedNodesComputedInfo:any,\r\n            private getScrollDirection:any,\r\n            private getY: IGetY,\r\n            private observeOnScope: any,\r\n            private transformY: ITransformY) {\r\n\r\n        }\r\n\r\n        public createInstance = (options: any) => {\r\n            var instance = new VirtualIndexedListViewRenderer(this.$compile, this.$injector, this.$interval, this.$timeout, this.getRenderedNodesComputedInfo, this.getScrollDirection, this.getY, this.observeOnScope, this.transformY);\r\n            instance.items = options.items;\r\n            instance.itemName = options.itemName;\r\n            instance.scope = options.scope;\r\n            instance.element = options.element;\r\n            instance.template = options.template;\r\n            instance.itemHeight = Number(options.itemHeight);\r\n            instance.viewPort = (<IViewPort>this.$injector.get(\"virtualIndexedListView.viewPort\")).createInstance({ element: instance.element });\r\n            instance.container = (<IContainer>this.$injector.get(\"virtualIndexedListView.container\")).createInstance({ element: instance.element });\r\n            instance.container.setHeight(instance.items.length * instance.itemHeight);\r\n\r\n            if (instance.numberOfRenderedItems > instance.items.length)\r\n                instance.numberOfRenderedItems = instance.items.length;\r\n\r\n            instance.$interval(() => {\r\n                instance.render({\r\n                    scrollY: instance.viewPort.scrollY,\r\n                    lastScrollY: instance.lastYScroll,\r\n                    viewPortHeight: instance.viewPort.height\r\n                });\r\n                instance.lastYScroll = instance.viewPort.scrollY;\r\n            }, 10,null, false);\r\n\r\n            var timeoutPromise:any = null;\r\n\r\n            instance.observeOnScope(instance.scope, 'vm.filterTerm')\r\n                .map(function (data) {\r\n                    return data;\r\n                })\r\n                .subscribe(function (change) {\r\n                instance.filterTerm.observedChange = change;\r\n                instance.filterTerm.newValue = change.newValue;\r\n                instance.filterTerm.oldValue = change.oldValue;\r\n                instance.filterFn = (value: any) => {\r\n                    return value.name.indexOf(instance.filterTerm.newValue) > -1;\r\n                }\r\n\r\n                if (timeoutPromise)\r\n                    instance.$timeout.cancel(timeoutPromise);\r\n\r\n                timeoutPromise = instance.$timeout(() => {\r\n                        instance.render({ force: true, lastScrollY: 0, scrollY: 0, viewPortHeight: instance.viewPort.height });\r\n                }, 10, false);\r\n            });\r\n\r\n            instance.filterFn = instance.scope.filterFn;\r\n\r\n            return instance;\r\n        }\r\n\r\n        public _filterTerm: any = {};\r\n\r\n        public get filterTerm() {\r\n            return this._filterTerm;\r\n        }\r\n\r\n        public set filterTerm(value: any) {\r\n            this._filterTerm = value;\r\n        }\r\n\r\n        public render = (options?: IRenderOptions) => {\r\n\r\n            if (!options) {\r\n                options = {\r\n                    lastScrollY:  0,\r\n                    scrollY: 0,\r\n                    viewPortHeight: this.viewPort.height\r\n                };\r\n            }\r\n\r\n            if (options.force ) {\r\n                this.forceRender(options);\r\n                return;\r\n            }\r\n\r\n            if (this.hasRendered === false) {\r\n                this.initialRender(options);\r\n            }\r\n\r\n            if (this.getScrollDirection(options.scrollY, options.lastScrollY) === ScrollingDirection.Down) {\r\n                this.renderDown(options);\r\n                return;\r\n            }\r\n\r\n            if (this.getScrollDirection(options.scrollY, options.lastScrollY) === ScrollingDirection.Up) {\r\n                this.renderUp(options);\r\n                return;\r\n            }\r\n\r\n            if (this.getScrollDirection(options.scrollY, options.lastScrollY) === ScrollingDirection.None) {\r\n                this.stabilizeRender(options);\r\n                return;\r\n            }\r\n\r\n        }\r\n\r\n        public forceRender = (options: IRenderOptions) => {\r\n\r\n            if (!this.hasRendered)\r\n                return;\r\n\r\n            this.container.reInitialize({ height: this.items.length * this.itemHeight });\r\n\r\n            this.initialRender(options);\r\n\r\n            try {\r\n                this.scope.$digest();\r\n            } catch (error) {\r\n\r\n            }            \r\n        }\r\n\r\n        public initialRender = (options: IRenderOptions) => {\r\n            for (var i = 0; i < this.numberOfRenderedItems; i++) {\r\n                var childScope: any = this.scope.$new(true);\r\n                childScope[this.itemName] = this.items[i];\r\n                childScope.$$index = i;\r\n                var itemContent = this.$compile(angular.element(this.template))(childScope);\r\n                this.container.augmentedJQuery.append(itemContent);\r\n            }\r\n            this.hasRendered = true;\r\n        }\r\n\r\n        public renderDown = (options: IRenderOptions) => {\r\n            var reachedBottom = false;\r\n\r\n            var allNodesHaveBeenMoved = false;\r\n\r\n            var item = null;\r\n\r\n            var index = null;\r\n\r\n            do {\r\n\r\n                var cachedItemsList = (<any[]>this.getRenderedNodesComputedInfo({ getY: this.getY, renderedNodes: this.container.htmlElement.children, itemHeight: this.itemHeight, desc: false }));\r\n\r\n                if (cachedItemsList[cachedItemsList.length - 1].bottom >= this.container.bottom) {\r\n                    reachedBottom = true;\r\n                } else {\r\n                    index = cachedItemsList[cachedItemsList.length - 1].index + 1;\r\n                    item = this.items[index];\r\n                }\r\n\r\n                if (cachedItemsList[0].bottom >= options.scrollY)\r\n                    allNodesHaveBeenMoved = true;\r\n\r\n\r\n                if (!reachedBottom && !allNodesHaveBeenMoved) {\r\n                    this.transformY(cachedItemsList[0].node, (this.numberOfRenderedItems * this.itemHeight) + this.getY(cachedItemsList[0].node));\r\n                    var scope: any = angular.element(cachedItemsList[0].node).scope();\r\n                    scope[this.itemName] = item;\r\n                    scope.$$index = index;\r\n                    scope.$digest();\r\n                }\r\n\r\n            } while (!reachedBottom && !allNodesHaveBeenMoved)\r\n        }\r\n\r\n        public renderUp = (options: IRenderOptions) => {\r\n            var reachedTop = false;\r\n\r\n            var allNodesHaveBeenMoved = false;\r\n\r\n            var item = null;\r\n\r\n            var index = null;\r\n\r\n            do {\r\n\r\n                var cachedItemsList = (<any[]>this.getRenderedNodesComputedInfo({ getY: this.getY, renderedNodes: this.container.htmlElement.children, itemHeight: this.itemHeight, desc: true }));\r\n\r\n                if (cachedItemsList[cachedItemsList.length - 1].top <= 0) {\r\n                    reachedTop = true;\r\n                } else {\r\n                    index = cachedItemsList[cachedItemsList.length - 1].index - 1;\r\n                    item = this.items[index];\r\n                }\r\n\r\n                if (cachedItemsList[0].top <= options.scrollY + options.viewPortHeight)\r\n                    allNodesHaveBeenMoved = true;\r\n\r\n                if (!reachedTop && !allNodesHaveBeenMoved) {\r\n                    this.transformY(cachedItemsList[0].node, this.getY(cachedItemsList[0].node) - (this.numberOfRenderedItems * this.itemHeight));\r\n                    var scope: any = angular.element(cachedItemsList[0].node).scope();\r\n                    scope[this.itemName] = item;\r\n                    scope.$$index = index;\r\n                    scope.$digest();\r\n                }\r\n\r\n            } while (!reachedTop && !allNodesHaveBeenMoved)            \r\n        }\r\n\r\n        public stabilizeRender = (options: IRenderOptions) => {\r\n\r\n            var cachedItemsList = (<any[]>this.getRenderedNodesComputedInfo({ getY: this.getY, renderedNodes: this.container.htmlElement.children, itemHeight: this.itemHeight, desc: false }));\r\n\r\n            var top = cachedItemsList[0].top;\r\n            var bottom = cachedItemsList[cachedItemsList.length - 1].bottom;\r\n\r\n\r\n            if (top > options.scrollY) {\r\n                console.log(\"missing items on top\");\r\n            }\r\n\r\n            if (bottom <= options.scrollY + options.viewPortHeight) {\r\n                this.renderDown(options);\r\n            }\r\n        }\r\n\r\n        private viewPort: IViewPort;\r\n\r\n        public hasRendered: boolean = false;\r\n\r\n        public element: ng.IAugmentedJQuery;\r\n\r\n        public template: string;\r\n\r\n        public get containerHeight() {\r\n            return this.items.length * this.itemHeight;\r\n        }\r\n\r\n        private _items: any[];\r\n\r\n        public get items() {\r\n\r\n            if (this.filterFn && this.filterTerm.newValue)\r\n                return this._items.filter(this.filterFn);\r\n\r\n            return this._items;\r\n        }\r\n\r\n        public set items(value: any[]) {\r\n            this._items = value;\r\n        }\r\n\r\n        public container: IContainer;\r\n\r\n        public itemName: string;\r\n\r\n        public filterFn:any;\r\n\r\n        public scope: any;\r\n\r\n        public itemHeight: number;\r\n\r\n        public lastYScroll: number = 0;\r\n\r\n        private _numberOfRenderedItems;\r\n\r\n        public get numberOfRenderedItems() {\r\n            if (!this._numberOfRenderedItems)\r\n                return Math.ceil(1380 / Number(this.itemHeight));\r\n\r\n            return this._numberOfRenderedItems;\r\n        }\r\n\r\n        public set numberOfRenderedItems(value:number) {\r\n            this._numberOfRenderedItems = value;\r\n        }\r\n\r\n    }\r\n\r\n    angular.module(\"virtualIndexedListView\").service(\"virtualIndexedListViewRenderer\", [\"$compile\",\r\n        \"$injector\",\r\n        \"$interval\",\r\n        \"$timeout\",\r\n        \"virtualIndexedListView.getRenderedNodesComputedInfo\",\r\n        \"virtualIndexedListView.getScrollDirection\",\r\n        \"virtualIndexedListView.getY\",\r\n        \"observeOnScope\",\r\n        \"virtualIndexedListView.transformY\", VirtualIndexedListViewRenderer]);\r\n} "],"sourceRoot":"/source/"}