{"version":3,"sources":["services/virtualIndexedListViewRenderer.ts"],"names":["VirtualIndexedListView","VirtualIndexedListView.VirtualIndexedListViewRenderer","VirtualIndexedListView.VirtualIndexedListViewRenderer.constructor","VirtualIndexedListView.VirtualIndexedListViewRenderer.numberOfRenderedItems","VirtualIndexedListView.VirtualIndexedListViewRenderer.containerElement","VirtualIndexedListView.VirtualIndexedListViewRenderer.renderedNodes"],"mappings":"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","file":"services/virtualIndexedListViewRenderer.js","sourcesContent":["/// <reference path=\"../../typings/typescriptapp.d.ts\" />\r\n\r\nmodule VirtualIndexedListView {\r\n\r\n    \"use strict\";\r\n    \r\n    class VirtualIndexedListViewRenderer implements IVirtualIndexedListViewRenderer {\r\n        constructor(private $compile: ng.ICompileService, private $injector: ng.auto.IInjectorService, private $interval: ng.IIntervalService, private getY: IGetY, private transformY: ITransformY) {\r\n\r\n        }\r\n\r\n        public createInstance = (options: any) => {\r\n            var instance = new VirtualIndexedListViewRenderer(this.$compile, this.$injector, this.$interval, this.getY, this.transformY);\r\n            instance.containerHeight = options.containerHeight;\r\n            instance.items = options.items;\r\n            instance.itemName = options.itemName;\r\n            instance.scope = options.scope;\r\n            instance.element = options.element;\r\n            instance.template = options.template;\r\n            instance.itemHeight = Number(options.itemHeight);\r\n            instance.viewPort = (<IViewPort>this.$injector.get(\"virtualIndexedListView.viewPort\")).createInstance({ element: instance.element });\r\n\r\n            if (instance.numberOfRenderedItems > instance.items.length)\r\n                instance.numberOfRenderedItems = instance.items.length;\r\n\r\n            setInterval(() => {\r\n                instance.render({\r\n                    scrollY: instance.viewPort.scrollY,\r\n                    lastScrollY: instance.lastYScroll,\r\n                    viewPortHeight: instance.viewPort.height\r\n                });\r\n                instance.lastYScroll = instance.viewPort.scrollY;\r\n            }, 10);\r\n\r\n            return instance;\r\n        }\r\n\r\n        public render = (options: IRenderOptions) => {\r\n\r\n            var containerElement: ng.IAugmentedJQuery;\r\n\r\n            if (this.hasRendered === false) {\r\n                containerElement = angular.element(\"<div class='container'></div>\");\r\n                containerElement.css(\"height\", this.containerHeight);\r\n\r\n                this.element.append(containerElement);\r\n\r\n                for (var i = 0; i < this.numberOfRenderedItems; i++) {\r\n                    var childScope:any = this.scope.$new(true);\r\n                    childScope[this.itemName] = this.items[i];\r\n                    childScope.$$index = i;\r\n                    var itemContent = this.$compile(angular.element(this.template))(childScope);\r\n                    containerElement.append(itemContent);\r\n                }\r\n            }\r\n\r\n            if (this.getScrollDirections(options.scrollY, options.lastScrollY) === ScrollingDirection.Down) {\r\n\r\n                var reachedBottom = false;\r\n\r\n                var allNodesHaveBeenMoved = false;\r\n\r\n                var item = null;\r\n\r\n                var index = null;\r\n\r\n                do {\r\n\r\n                    var cachedItemsList = this.computeCacheItemsList();\r\n\r\n                    if (this.cacheItemsItemList[this.cacheItemsItemList.length - 1].bottom >= (this.items.length * this.itemHeight)) {\r\n                        reachedBottom = true;\r\n                    } else {\r\n                        index = this.cacheItemsItemList[this.cacheItemsItemList.length - 1].index + 1;\r\n                        item = this.items[index];\r\n                    }\r\n\r\n                    if (cachedItemsList[0].bottom >= options.scrollY) \r\n                        allNodesHaveBeenMoved = true;\r\n                    \r\n\r\n                    if (!reachedBottom && !allNodesHaveBeenMoved) {\r\n                        this.transformY(this.cacheItemsItemList[0].node, (this.numberOfRenderedItems * this.itemHeight) + this.getY(this.cacheItemsItemList[0].node));\r\n                        var scope: any = angular.element(this.cacheItemsItemList[0].node).scope();\r\n                        scope[this.itemName] = item;\r\n                        scope.$$index = index;\r\n                        scope.$digest();\r\n                    }\r\n\r\n                } while (!reachedBottom && !allNodesHaveBeenMoved)\r\n                \r\n            }\r\n\r\n            if (this.getScrollDirections(options.scrollY, options.lastScrollY) === ScrollingDirection.Up) {\r\n\r\n                var reachedTop = false;\r\n\r\n                var allNodesHaveBeenMoved = false;\r\n\r\n                var item = null;\r\n\r\n                var index = null;\r\n\r\n                do {\r\n\r\n                    var cachedItemsList = this.computeCacheItemsList({ desc: true });\r\n\r\n                    if (this.cacheItemsItemList[this.cacheItemsItemList.length - 1].top <= 0) {\r\n                        reachedTop = true;\r\n                    } else {\r\n                        index = this.cacheItemsItemList[this.cacheItemsItemList.length - 1].index - 1;\r\n                        item = this.items[index];\r\n                    }\r\n\r\n                    if (cachedItemsList[0].top <= options.scrollY + options.viewPortHeight)\r\n                        allNodesHaveBeenMoved = true;\r\n\r\n                    if (!reachedTop && !allNodesHaveBeenMoved) {\r\n                        this.transformY(this.cacheItemsItemList[0].node, this.getY(this.cacheItemsItemList[0].node) - (this.numberOfRenderedItems * this.itemHeight));\r\n                        var scope: any = angular.element(this.cacheItemsItemList[0].node).scope();\r\n                        scope[this.itemName] = item;\r\n                        scope.$$index = index;\r\n                        scope.$digest();\r\n                    }\r\n\r\n                } while (!reachedTop && !allNodesHaveBeenMoved)\r\n            }\r\n\r\n            if (this.hasRendered && this.getScrollDirections(options.scrollY, options.lastScrollY) === ScrollingDirection.None) {\r\n\r\n                var cachedItemsList = this.computeCacheItemsList();\r\n\r\n                var top = cachedItemsList[0].top;\r\n                var bottom = cachedItemsList[cachedItemsList.length - 1].bottom;\r\n\r\n\r\n                if (top > options.scrollY) {\r\n                    console.log(\"missing items on top\");\r\n                }\r\n\r\n                if (bottom < options.scrollY + options.viewPortHeight) {\r\n                    console.log(\"missing items on bottom\");\r\n                    var reachedBottom = false;\r\n\r\n                    var allNodesHaveBeenMoved = false;\r\n\r\n                    var item = null;\r\n\r\n                    var index = null;\r\n\r\n                    do {\r\n\r\n                        var cachedItemsList = this.computeCacheItemsList();\r\n\r\n                        if (this.cacheItemsItemList[this.cacheItemsItemList.length - 1].bottom >= (this.items.length * this.itemHeight)) {\r\n                            reachedBottom = true;\r\n                        } else {\r\n                            index = this.cacheItemsItemList[this.cacheItemsItemList.length - 1].index + 1;\r\n                            item = this.items[index];\r\n                        }\r\n\r\n                        if (cachedItemsList[0].bottom >= options.scrollY)\r\n                            allNodesHaveBeenMoved = true;\r\n\r\n\r\n                        if (!reachedBottom && !allNodesHaveBeenMoved) {\r\n                            this.transformY(this.cacheItemsItemList[0].node, (this.numberOfRenderedItems * this.itemHeight) + this.getY(this.cacheItemsItemList[0].node));\r\n                            var scope: any = angular.element(this.cacheItemsItemList[0].node).scope();\r\n                            scope[this.itemName] = item;\r\n                            scope.$$index = index;\r\n                            scope.$digest();\r\n                        }\r\n\r\n                    } while (!reachedBottom && !allNodesHaveBeenMoved)\r\n                }\r\n            }\r\n\r\n\r\n            this.hasRendered = true;\r\n\r\n        }\r\n\r\n\r\n        public computeCacheItemsList = (options?:any) => {\r\n            this.cacheItemsItemList = [];\r\n\r\n            for (var i = 0; i < this.renderedNodes.length; i++) {\r\n\r\n                var y = this.getY(this.renderedNodes[i]);\r\n\r\n                var offsetTop = this.renderedNodes[i].offsetTop;\r\n\r\n                var itemHeight = this.itemHeight;\r\n\r\n                this.cacheItemsItemList.push({\r\n                    top: y + offsetTop,\r\n                    bottom: y + offsetTop + itemHeight,\r\n                    index: (<any>angular.element(this.renderedNodes[i]).scope()).$$index,\r\n                    node: this.renderedNodes[i]\r\n                });\r\n            }\r\n\r\n            if (options && options.desc) {\r\n                this.cacheItemsItemList.sort((a: any, b: any) => {\r\n                    return b.top - a.top;\r\n                });       \r\n            } else {\r\n                this.cacheItemsItemList.sort((a: any, b: any) => {\r\n                    return a.top - b.top;\r\n                });                \r\n            }\r\n\r\n            return this.cacheItemsItemList;\r\n        }\r\n\r\n        public cacheItemsItemList:Array<any> = [];\r\n         \r\n        public getScrollDirections = (scrollY:number, lastScrollY:number): ScrollingDirection => {\r\n            if (lastScrollY && scrollY > lastScrollY) {\r\n                return ScrollingDirection.Down;\r\n            }\r\n\r\n            if (lastScrollY && scrollY < lastScrollY) {\r\n                return ScrollingDirection.Up;\r\n            }\r\n\r\n            if (lastScrollY && scrollY === lastScrollY) {\r\n                return ScrollingDirection.None;\r\n            }\r\n\r\n            return null;\r\n        }\r\n\r\n        private viewPort: IViewPort;\r\n\r\n        public hasRendered: boolean = false;\r\n\r\n        public element: ng.IAugmentedJQuery;\r\n\r\n        public template: string;\r\n\r\n        public containerHeight: number;\r\n\r\n        public items: any[];\r\n\r\n        public itemName: string;\r\n\r\n        public scope: ng.IScope;\r\n\r\n        public itemHeight: number;\r\n\r\n        public lastYScroll: number = 0;\r\n\r\n        private _numberOfRenderedItems;\r\n\r\n        public get numberOfRenderedItems() {\r\n            if (!this._numberOfRenderedItems)\r\n                return Math.ceil(1380 / Number(this.itemHeight));\r\n\r\n            return this._numberOfRenderedItems;\r\n        }\r\n\r\n        public set numberOfRenderedItems(value:number) {\r\n            this._numberOfRenderedItems = value;\r\n        }\r\n\r\n        private _containerElement: ng.IAugmentedJQuery;\r\n\r\n        public get containerElement() {\r\n            if (!this._containerElement)\r\n                return this.element.find(\".container\");\r\n\r\n            return this._containerElement;\r\n        }\r\n\r\n        public set containerElement(value: ng.IAugmentedJQuery) {\r\n            this._containerElement = value;\r\n        }\r\n\r\n        public get renderedNodes(): Array<HTMLElement> {            \r\n            return <any>this.containerElement[0].children;\r\n        }\r\n    }\r\n\r\n    angular.module(\"virtualIndexedListView\").service(\"virtualIndexedListViewRenderer\", [\"$compile\", \"$injector\", \"$interval\", \"virtualIndexedListView.getY\", \"virtualIndexedListView.transformY\", VirtualIndexedListViewRenderer]);\r\n} "],"sourceRoot":"/source/"}