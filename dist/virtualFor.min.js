angular.module("virtualFor",[]);var VirtualFor;!function(e){var t=function(){function e(e,t){var r=this;this.getHtml=e,this.renderer=t,this.restirct="A",this.transclude="element",this.scope=!1,this.compile=function(e){function t(e,t){var r=e.vm[t.virtualFor];return r||(r=JSON.parse(t.virtualFor)),r}function n(e,t){for(var r=[],n=e[0].attributes,i=0;i<n.length;i++)n[i].nodeName.indexOf(t)>-1&&r.push(n[i].nodeName);r.forEach(function(t){e[0].removeAttribute(t)})}var i=r.renderer,o=e.parent(),a=r.getHtml;return function(e,r,l,s,u){u(e.$new(),function(r){n(r,"virtual-for"),i.createInstance({element:angular.element(o),template:a(r[0],!0),scope:e,attributes:l,items:t(e,l),dataService:l.virtualForDataService,searchTermNameOnScope:l.virtualForSearchTermNameOnScope,filterFnNameOnVm:l.virtualForFilterFnNameOnVm}).render({lastScrollY:0,scrollY:0})})}}}return e.createInstance=function(t,r){return new e(t,r)},e}();e.VirtualFor=t,angular.module("virtualFor").directive("virtualFor",["virtualFor.getHtml","virtualFor.renderer",t.createInstance])}(VirtualFor||(VirtualFor={})),angular.module("virtualFor").value("virtualFor.compileExpression",compileExpression);var VirtualFor;!function(e){"use strict";var t=function(e,t){if(!e||!e.tagName)return"";var r,n,i=document.createElement("div");return i.appendChild(e.cloneNode(!1)),r=i.innerHTML,t&&(n=r.indexOf(">")+1,r=r.substring(0,n)+e.innerHTML+r.substring(n)),i=null,r};angular.module("virtualFor").value("virtualFor.getHtml",t)}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){e.getX=function(e){var t=angular.element(e).css("transform");return"none"===t?0:JSON.parse(t.replace(/^\w+\(/,"[").replace(/\)$/,"]"))[6]},angular.module("virtualFor").value("virtualFor.getX",e.getX)}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){e.getY=function(e){var t=angular.element(e).css("transform");return"none"===t?0:JSON.parse(t.replace(/^\w+\(/,"[").replace(/\)$/,"]"))[5]},angular.module("virtualFor").value("virtualFor.getY",e.getY)}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){"use strict";var t=function(){function e(e){var t=this;this.$injector=e,this.get=function(e){switch(e.interfaceName){case"ICollectionManager":return e.filterFnNameOnVm&&e.searchTermNameOnScope?t.$injector.get("virtualFor.filterableCollectionManager").createInstance({items:e.items,scope:e.scope,searchTermNameOnScope:e.searchTermNameOnScope,filterFnNameOnVm:e.filterFnNameOnVm}):e.dataService?t.$injector.get("virtualFor.lazyLoadCollectionManager").createInstance({items:e.items,dataService:e.dataService}):t.$injector.get("virtualFor.collectionManager").createInstance({items:e.items});case"IViewPort":return t.$injector.get("virtualFor.viewPort").createInstance({element:e.element});case"IContainer":return t.$injector.get("virtualFor.container").createInstance({element:e.element});case"IRenderedNodes":return t.$injector.get("virtualFor.renderedNodes").createInstance({container:e.container});case"IVirtualNodes":return t.$injector.get("virtualFor.virtualNodes").createInstance({items:e.items,numberOfRenderedItems:e.numberOfRenderedItems,itemHeight:e.itemHeight})}}}return e}();angular.module("virtualFor").service("virtualFor.injector",["$injector",t])}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){e.safeDigest=function(e){e.$$phase||e.$root.$$phase||e.$digest()},angular.module("virtualFor").value("virtualFor.safeDigest",e.safeDigest)}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){e.transformY=function(e,t){return angular.element(e).css({"-moz-transform":"translateY("+t+"px)","-webkit-transform":"translateY("+t+"px)","-ms-transform":"translateY("+t+"px)","-transform":"translateY("+t+"px)"}),e},angular.module("virtualFor").value("virtualFor.transformY",e.transformY)}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){var t=function(){function e(t){var r=this;this.$q=t,this.createInstance=function(t){var n=new e(r.$q);return n.items=t.items,n.numberOfItems=t.items.length,n},this.getIndexByCriteriaAsync=function(e){for(var t=r.$q.defer(),n=null,i=0;i<r.items.length;i++)r.items[i][e.criteria.key]==e.criteria.value&&(n=i);return t.resolve({index:n}),t.promise},this.subscriptions=[],this.subscribe=function(e){return r.subscriptions.push({callback:e.callback,id:r.subscriptions.length+1,isActive:!0}),r.subscriptions.length}}return Object.defineProperty(e.prototype,"numberOfItems",{get:function(){return this._numberOfItems},set:function(e){this._numberOfItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),e}();e.CollectionManager=t,angular.module("virtualFor").service("virtualFor.collectionManager",["$q",t])}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){var t=function(){function e(t){var r=this;this.getY=t,this.createInstance=function(t){var n=new e(r.getY),i=angular.element("<div class='container'></div>");return i[0].style.padding="0",i[0].style.margin="0",t.element.append(i),n.augmentedJQuery=t.element.find(".container"),n},this.reInitialize=function(e){for(var t=0;t<r.htmlElement.children.length;t++){var n=angular.element(r.htmlElement.children[t]).scope();n.$destroy()}r.htmlElement.innerHTML="",r.setHeight(e.height)},this.isNodeAtBottom=function(e){var t=r.getY(e.node)+e.node.offsetTop+e.node.offsetTop;return t===r.height},this.isNodeAtTop=function(e){var t=r.getY(e.node)+e.node.offsetTop;return t===r.top},this.setHeight=function(e){r.augmentedJQuery.css("height",e)}}return Object.defineProperty(e.prototype,"height",{get:function(){return this.htmlElement.offsetHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.htmlElement.offsetHeight+this.htmlElement.offsetTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.htmlElement.offsetTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"augmentedJQuery",{get:function(){return this._augmentedJQuery},set:function(e){this._augmentedJQuery=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"htmlElement",{get:function(){return this.augmentedJQuery[0]},enumerable:!0,configurable:!0}),e}();angular.module("virtualFor").service("virtualFor.container",["virtualFor.getY",t])}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){var t=function(){function e(t,r){var n=this;this.$q=t,this.$timeout=r,this.createInstance=function(t){var r=new e(n.$q,n.$timeout);return r.items=t.items,r.numberOfItems=t.items.length,r.filterFn=t.scope.vm[t.filterFnNameOnVm],t.scope.$watch(t.searchTermNameOnScope,function(e){r.searchTerm=e;for(var t=0;t<r.subscriptions.length;t++)r.subscriptions[t].callback()}),r},this.getIndexByCriteriaAsync=function(e){for(var t=n.$q.defer(),r=null,i=0;i<n.items.length;i++)n.items[i][e.criteria.key]==e.criteria.value&&(r=i);return t.resolve({index:r}),t.promise},this.subscriptions=[],this.subscribe=function(e){return n.subscriptions.push({callback:e.callback,id:n.subscriptions.length+1,isActive:!0}),n.subscriptions.length}}return Object.defineProperty(e.prototype,"numberOfItems",{get:function(){return this._numberOfItems},set:function(e){this._numberOfItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this.searchTerm&&""!=this.searchTerm?this._items.filter(function(t){return e.filterFn(t,e.searchTerm)}):this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),e}();e.FilterableCollectionManager=t,angular.module("virtualFor").service("virtualFor.filterableCollectionManager",["$q","$timeout",t])}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){var t=function(){function e(t,r){var n=this;this.$injector=t,this.$q=r,this.createInstance=function(t){var r=new e(n.$injector,n.$q);return r.items=t.items,r.numberOfItems=t.items.length,r.dataService=r.$injector.get(t.dataService),r.dataService.search({}).then(function(e){r.numberOfItems=e.data.TotalHits;for(var t=0;t<e.data.TotalHits;t++)r.items.push(null);for(var t=0;t<e.data.Data.length;t++)r.items[t]=e.data.Data[t].Item;for(var t=0;t<r.subscriptions.length;t++)r.subscriptions[t].callback()}),r},this.getIndexByCriteriaAsync=function(e){for(var t=n.$q.defer(),r=null,i=0;i<n.items.length;i++)n.items[i][e.criteria.key]==e.criteria.value&&(r=i);return t.resolve({index:r}),t.promise},this.loadMore=function(){var e=n.lastLoadedIndex;n.loaded||n.dataService.search({params:{offset:e,pageSize:n.pageSize}}).then(function(t){for(var r=0;r<t.data.Data.length;r++)n.items[r+e]=t.data.Data[r].Item})},this.subscriptions=[],this.subscribe=function(e){return n.subscriptions.push({callback:e.callback,id:n.subscriptions.length+1,isActive:!0}),n.subscriptions.length}}return Object.defineProperty(e.prototype,"loaded",{get:function(){for(var e=!0,t=0;t<this.items.length;t++)null===this.items[t]&&(e=!1,t=this.items.length);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastLoadedIndex",{get:function(){for(var e=null,t=0;t<this.items.length;t++)null===this.items[t]&&null===e&&(e=t,t=this.items.length);return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSize",{get:function(){return 128},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfItems",{get:function(){return this._numberOfItems},set:function(e){this._numberOfItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),e}();e.LazyLoadCollectionManager=t,angular.module("virtualFor").service("virtualFor.lazyLoadCollectionManager",["$injector","$q",t])}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){var t=function(){function e(t,r){var n=this;this.getX=t,this.getY=r,this.createInstance=function(t){var r=new e(n.getX,n.getY);return r.node=t.node,r}}return Object.defineProperty(e.prototype,"left",{get:function(){return this.getX(this.node)+this.node.offsetLeft},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.getX(this.node)+this.node.offsetLeft+this.node.offsetWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.getY(this.node)+this.node.offsetTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.getY(this.node)+this.node.offsetHeight+this.node.offsetTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return angular.element(this.node).scope()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$$index",{get:function(){return this.scope.$$index},enumerable:!0,configurable:!0}),e}();angular.module("virtualFor").service("virtualFor.renderedNode",["virtualFor.getX","virtualFor.getY",t])}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){var t=function(){function e(t,r){var n=this;this.getX=t,this.getY=r,this.createInstance=function(t){var r=new e(n.getX,n.getY);return r.container=t.container,r},this.getAll=function(e){var t;switch(e.orientation){case"horizontal":t="left";break;default:t="top"}switch(e.order){case"desc":return n.map.sort(function(e,r){return r[t]-e[t]});case"asc":return n.map.sort(function(e,r){return e[t]-r[t]})}},this.getHead=function(){var e=n.getAll({order:"asc"});return e.length<1?null:e[0]},this.getTail=function(){var e=n.getAll({order:"desc"});return e.length<1?null:e[0]},this.getHeadAndTail=function(){var e=n.getAll({order:"asc"});return e.length<1?null:{head:e[0],tail:e[e.length-1]}}}return Object.defineProperty(e.prototype,"nodes",{get:function(){return this.container.htmlElement.childNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"map",{get:function(){for(var e=[],t=this.nodes,r=0;r<t.length;r++){var n=t[r];e.push({top:this.getY(n)+n.offsetTop,bottom:this.getY(n)+n.offsetTop+n.offsetHeight,node:n})}return e},enumerable:!0,configurable:!0}),e}();angular.module("virtualFor").service("virtualFor.renderedNodes",["virtualFor.getX","virtualFor.getY",t])}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){"use strict";var t=function(){function t(r,n,i,o,a,l,s){var u=this;this.$compile=r,this.$interval=n,this.$$rAF=i,this.getY=o,this.injector=a,this.safeDigest=l,this.transformY=s,this.createInstance=function(r){var n=new t(u.$compile,u.$interval,u.$$rAF,u.getY,u.injector,u.safeDigest,u.transformY);return n.attributes=r.attributes,n.scope=r.scope,n.element=r.element,n.template=r.template,n.viewPort=u.injector.get({interfaceName:"IViewPort",element:n.element}),n.container=u.injector.get({interfaceName:"IContainer",element:n.element}),n.collectionManager=u.injector.get({interfaceName:"ICollectionManager",element:n.element,scope:r.scope,searchTermNameOnScope:r.searchTermNameOnScope,filterFnNameOnVm:r.filterFnNameOnVm,items:r.items,dataService:r.dataService,attributes:r.attributes}),n.renderedNodes=u.injector.get({interfaceName:"IRenderedNodes",container:n.container}),n.collectionManager instanceof e.LazyLoadCollectionManager&&n.$interval(n.collectionManager.loadMore,1e3,null,!1),n.scope.$on(n.scrollEventName,n.onScrollTo),n.scope.$on(n.removeItemEventName,n.renderRemoveItem),n.collectionManager.subscribe({callback:n.forceRender}),n.container.setHeight(n.collectionManager.numberOfItems*n.itemHeight),n.$interval(n.render,1,null,!1),n.$interval(n.onResize,10,null,!1),n},this.onScrollTo=function(e,t){u.collectionManager.getIndexByCriteriaAsync({criteria:t}).then(function(e){u.viewPort.scrollTo(e.index*u.itemHeight)})},this.render=function(e){return e&&e.force?u.forceRender():u.hasRendered===!1?u.initialRender():u.viewPort.scrollY>u.lastScrollY?u.renderTopToBottom():u.viewPort.scrollY<u.lastScrollY?u.renderBottomToTop():void 0},this.forceRender=function(){u.hasRendered&&(u.container.reInitialize({height:u.collectionManager.numberOfItems*u.itemHeight}),u.initialRender(),u.safeDigest(u.scope))},this.initialRender=function(){for(var e=document.createDocumentFragment(),t=0;t<u.numberOfRenderedItems;t++){var r=u.scope.$new(!0);r[u.itemName]=u.collectionManager.items[t],r.$$index=t;var n=u.$compile(angular.element(u.template))(r);e.appendChild(n[0])}u.container.augmentedJQuery[0].appendChild(e),u.hasRendered=!0},this.renderTopToBottom=function(){var e=!1,t=!1,r=!1;do{var n=u.renderedNodes.getHeadAndTail(),i=n.tail,o=n.head;if(angular.element(i.node).scope().$$index==u.collectionManager.numberOfItems-1&&(e=!0),o.bottom>=u.viewPort.scrollY&&(t=!0),!e&&!t){var a=u.getY(o.node),l=u.getY(i.node),s=u.container.top+a+o.node.offsetTop,c=u.container.top+l+i.node.offsetTop+u.itemHeight,m=c-s+a,f=angular.element(i.node).scope().$$index;u.moveAndUpdateScope({node:o.node,position:m,index:f+1,item:u.collectionManager.items[f+1]}),r=!0}}while(!e&&!t);r&&u.safeDigest(u.scope),u.lastScrollY=u.viewPort.scrollY},this.renderBottomToTop=function(){var e=!1,t=!1,r=!1;do{var n=u.renderedNodes.getHeadAndTail(),i=n.tail,o=n.head;if(0==angular.element(o.node).scope().$$index&&(e=!0),i.top<=u.viewPort.scrollY+u.viewPort.height&&(t=!0),!e&&!t){var a=u.getY(o.node),l=u.getY(i.node),s=u.container.top+l+i.node.offsetTop,c=u.container.top+a+o.node.offsetTop-u.itemHeight,m=c-s+l,f=angular.element(o.node).scope().$$index;u.moveAndUpdateScope({node:i.node,position:m,index:f-1,item:u.collectionManager.items[f-1]}),r=!0}}while(!e&&!t);r&&u.safeDigest(u.scope),u.lastScrollY=u.viewPort.scrollY},this.renderRemoveItem=function(e,t){var r=u.renderedNodes.getAll({order:"asc"}),n=null;u.collectionManager.items.splice(t.index,1),u.collectionManager.numberOfItems=u.collectionManager.numberOfItems-1;for(var i=0;i<r.length;i++)n=angular.element(r[i].node).scope(),n[u.itemName]=u.collectionManager.items[n.$$index];r.length>u.collectionManager.numberOfItems?(angular.element(r[r.length-1].node).scope().$destroy(),u.container.htmlElement.removeChild(r[r.length-1].node),u.container.setHeight(r.length*u.itemHeight)):u.container.setHeight(u.collectionManager.numberOfItems*u.itemHeight),u.safeDigest(u.scope)},this.moveAndUpdateScope=function(e){u.transformY(e.node,e.position);var t=angular.element(e.node).scope();t[u.itemName]=e.item,t.$$index=e.index},this.onResize=function(){if(u.maxViewPortHeight||(u.maxViewPortHeight=u.viewPort.height),u.maxViewPortHeight&&u.maxViewPortHeight<u.viewPort.height){u.maxViewPortHeight=u.viewPort.height;for(var e=u.renderedNodes.getAll({order:"asc"}).length;u.numberOfRenderedItems>e;){var t=u.renderedNodes.getHeadAndTail().tail,r=angular.element(t.node).scope().$$index+1,n=u.scope.$new(!0);n[u.itemName]=u.collectionManager.items[r],n.$$index=r;var i=u.$compile(angular.element(u.template))(n);u.container.augmentedJQuery.append(i);var o=i[0],a=u.getY(o),l=u.getY(t.node),s=u.container.top+a+o.offsetTop,c=u.container.top+l+t.node.offsetTop+u.itemHeight,m=c-s+a;u.transformY(o,m),e++}u.safeDigest(u.scope)}},this.hasRendered=!1,this.calculateItemHeight=function(e){var t;if(e.items.length>0){var r=u.scope.$new(!0);r[u.itemName]=e.items[0];var n=u.$compile(angular.element(u.template))(r);u.container.augmentedJQuery.append(n),t=n[0].offsetHeight,u.container.htmlElement.removeChild(n[0])}return t},this.lastScrollY=0}return Object.defineProperty(t.prototype,"numberOfRenderedItems",{get:function(){return this.collectionManager.numberOfItems<this.max?this.collectionManager.numberOfItems:this.max},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return Math.ceil((this.viewPort.height*this.renderPageSize+this.container.htmlElement.offsetTop)/Number(this.itemHeight))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemName",{get:function(){return this.attributes[this.controlPrefix+"Of"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemHeight",{get:function(){return!this._itemHeight&&this.collectionManager.items.length>0&&(this._itemHeight=this.calculateItemHeight({items:this.collectionManager.items})),this._itemHeight?this._itemHeight:Number(this.attributes[this.controlPrefix+"ItemHeight"])},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderPageSize",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.attributes[this.controlPrefix+"Name"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollEventName",{get:function(){return this.controlPrefix+"Scroll"+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"removeItemEventName",{get:function(){return this.controlPrefix+"RemoveItem"+this.name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"controlPrefix",{get:function(){return"virtualFor"},enumerable:!0,configurable:!0}),t}();e.Renderer=t,angular.module("virtualFor").service("virtualFor.renderer",["$compile","$interval","$$rAF","virtualFor.getY","virtualFor.injector","virtualFor.safeDigest","virtualFor.transformY",t])}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){var t=function(){function e(t){var r=this;this.$q=t,this.createInstance=function(t){var n=new e(r.$q);return n.items=t.items,n.numberOfItems=t.items.length,n},this.getIndexByCriteriaAsync=function(e){for(var t=r.$q.defer(),n=null,i=0;i<r.items.length;i++)r.items[i][e.criteria.key]==e.criteria.value&&(n=i);return t.resolve({index:n}),t.promise},this.subscriptions=[],this.subscribe=function(e){return r.subscriptions.push({callback:e.callback,id:r.subscriptions.length+1,isActive:!0}),r.subscriptions.length}}return Object.defineProperty(e.prototype,"numberOfItems",{get:function(){return this._numberOfItems},set:function(e){this._numberOfItems=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),e}();e.ScopeCollectionManager=t,angular.module("virtualFor").service("scopeCollectionManager",["$q",t])}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){var t=function(){function e(t){var r=this;this.$window=t,this.createInstance=function(t){var n=new e(r.$window);return n.scrollableParentElement=n.getScrollableParent(t.element[0]),n},this.getScrollableParent=function(e){if("HTML"==e.tagName)return null;var t=angular.element(e).css("overflowY");return"scroll"==t||"auto"==t?angular.element(e):e.parentNode?r.getScrollableParent(e.parentNode):void 0},this.scrollTo=function(e){r.scrollableParentElement?r.scrollableParentElement[0].scrollTop=e:r.$window.scrollTo(0,e)}}return Object.defineProperty(e.prototype,"scrollY",{get:function(){return this.scrollableParentElement?this.scrollableParentElement[0].scrollTop:this.$window.pageYOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scrollableParentElement?this.scrollableParentElement[0].offsetHeight:this.$window.innerHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.scrollY+this.height},enumerable:!0,configurable:!0}),e}();e.ViewPort=t,angular.module("virtualFor").service("virtualFor.viewPort",["$window",t])}(VirtualFor||(VirtualFor={}));var VirtualFor;!function(e){var t=function(){function e(){var t=this;this.createInstance=function(t){var r=new e;return r.numberOfRenderedItems=t.numberOfRenderedItems,r.items=t.items,r.numberOfItems=t.numberOfItems,r.itemHeight=t.itemHeight,r},this.getYByRenderedIndexAndScrollY=function(e){for(var r=null,n=0;n<t.map.length;n++){var i=t.map[n];i.renderedNodeIndex==e.renderedNodeIndex&&e.scrollY<=i.maxScrollYThreshold&&null==r&&(r=i.y)}return r},this.getPageIndex=function(e){return Math.floor(e.index/t.numberOfRenderedItems)}}return Object.defineProperty(e.prototype,"map",{get:function(){for(var e=[],t=0,r=0;r<this.items.length;r++){var n=this.getPageIndex({index:r});this.itemHeight+n*this.itemHeight;e.push({index:r,y:n*(this.numberOfRenderedItems*this.itemHeight),renderedNodeIndex:t,pageIndex:n,maxScrollYThreshold:(n+1)*this.itemHeight+this.itemHeight*t}),t++,t==this.numberOfRenderedItems&&(t=0)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pages",{get:function(){return Math.ceil(this.numberOfItems/this.numberOfRenderedItems)},enumerable:!0,configurable:!0}),e}();angular.module("virtualFor").service("virtualFor.virtualNodes",[t])}(VirtualFor||(VirtualFor={}));